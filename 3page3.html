<!--3page3.html | 1-10-2023 | Mistra localStorage integration 02-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ø La obra que hace obras Ø - Page 3</title>
  <link rel="stylesheet" href="3page3.css">
</head>
<body>
  <h1>Ø La obra que hace obras Ø</h1>
  <p>Paso 3: Imagen Generada</p>
  <div id="imageContainer"></div>
  <div id="loading">
    Loading...
  </div>
  <input type="number" id="userNumber" min="1" max="111" placeholder="elige un número entre 1 y 111" style="width: 180px;">
  <button id="nextButton">Siguiente</button>
  <script src="3page3.js"></script>

   <!-- Contenedor para la respuesta de la IA -->
   <div id="aiResponseContainer"></div>

   <script>
     document.addEventListener("DOMContentLoaded", async function() {
       // Recuperar el texto del usuario desde localStorage
       const userPrompt = localStorage.getItem("userPrompt");
 
       // Llamar a la función de la IA para obtener una respuesta
       const data = { 
         "inputs": userPrompt,
         "max_length": 500  // Establecer la longitud máxima para el texto generado
       };
       
       const response = await fetch(
         "https://api-inference.huggingface.co/models/mistralai/Mistral-7B-v0.1",
         {
           headers: { 
             Authorization: "Bearer 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",
             'Content-Type': 'application/json'
           },
           method: "POST",
           body: JSON.stringify(data),
         }
       );
       const result = await response.json();
       const generatedText = result[0].generated_text;
 
       // Mostrar la respuesta de la IA en la página
       const aiResponseContainer = document.getElementById("aiResponseContainer");
       aiResponseContainer.innerText = generatedText;
     });
   </script>
</body>
</html>
